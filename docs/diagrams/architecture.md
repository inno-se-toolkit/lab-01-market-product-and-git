## Product Choice
- Yandex Go
- https://go.yandex/?ysclid=mlc6jlq62i194552505
- Yandex Go is a mobile application of the Yandex company, associated with transportation and delivery. Was created on the basis of Yandex. Taxi.
## Main components
## Product Choice

- **Product name**: Yandex Go  
- **Website**: [https://yango.com](https://yango.com)  
- **Description**: Yandex Go — это мобильное приложение для заказа такси, доставки еды и других сервисов на базе геолокации. Оно соединяет пользователей с водителями, обрабатывает заказы в реальном времени и обеспечивает оплату, отслеживание поездки и оценку качества.

## Main components

![Yandex Go Component Diagram](../../../docs/diagrams/out/yandex-go/component-diagram/Component%20Diagram.svg)

[Yandex Go Component Diagram Code](../../../docs/diagrams/src/yandex-go/component-diagram.puml)

Ниже приведены 5 ключевых компонентов из диаграммы и их назначение:

1. **Mobile App (User)**  
   Это клиентское приложение для пассажиров, через которое они вызывают такси, выбирают тариф, отслеживают водителя и оплачивают поездку.

2. **Driver App**  
   Приложение для водителей, которое показывает им входящие заказы, маршрут до клиента и пункт назначения, а также позволяет управлять статусом поездки.

3. **Matching Service**  
   Сервис, который находит подходящего водителя для заказа пользователя на основе геолокации, рейтинга, типа автомобиля и загруженности сети. Он минимизирует время ожидания и расстояние до подачи.

4. **Routing & Navigation Service**  
   Обеспечивает построение оптимального маршрута с учётом пробок, дорожных ограничений и прогнозов движения в реальном времени. Интегрирован с картами Yandex Maps.

5. **Payment Service**  
   Обрабатывает все финансовые операции: сохранение способов оплаты, списание средств после поездки, возвраты, применение промокодов и интеграцию с бонусными системами.

## Data flow

![Yandex Go Sequence Diagram](../../../docs/diagrams/out/yandex-go/sequence-diagram/Sequence%20Diagram.svg)

[Yandex Go Sequence Diagram Code](../../../docs/diagrams/src/yandex-go/sequence-diagram.puml)

Рассмотрим группу действий **«Order a ride»**:

1. Пользователь открывает **Mobile App**, указывает точку назначения и нажимает «Заказать».  
2. Приложение отправляет запрос в **API Gateway**, который передаёт данные в **Matching Service**.  
3. **Matching Service** запрашивает список ближайших доступных водителей у **Driver Registry** и выбирает лучший вариант.  
4. Выбранный водитель получает уведомление через **Driver App**; если он принимает заказ, статус обновляется.  
5. **Routing & Navigation Service** строит маршрут и начинает отслеживать движение обоих участников.  
6. После завершения поездки **Payment Service** списывает сумму с сохранённого способа оплаты и отправляет чек.  
7. Данные, передаваемые между компонентами: координаты, ID пользователя/водителя, тариф, стоимость, статус поездки, временные метки.

## Deployment

![Yandex Go Deployment Diagram](../../../docs/diagrams/out/yandex-go/deployment-diagram/Deployment%20Diagram.svg)

[Yandex Go Deployment Diagram Code](../../../docs/diagrams/src/yandex-go/deployment-diagram.puml)

Архитектура Yandex Go развернута в гибридной облачной инфраструктуре:
- **Mobile App** и **Driver App** работают на устройствах пользователей и водителей по всему миру.
- Все бэкенд-сервисы (**Matching**, **Payment**, **Routing** и др.) работают в дата-центрах Yandex Cloud с репликацией между регионами (Москва, Санкт-Петербург, Стамбул и др.).
- Используются высокопроизводительные базы данных (например, YDB — распределённая SQL-БД от Yandex) для хранения заказов и профилей.
- Коммуникация между сервисами осуществляется через gRPC и очереди сообщений (Kafka), что обеспечивает низкую задержку и отказоустойчивость.

## Assumptions

1. Я предполагаю, что **Matching Service** использует алгоритмы машинного обучения для прогнозирования спроса и перераспределения водителей в «горячих точках» до возникновения заказов.
2. Я предполагаю, что **Payment Service** поддерживает офлайн-обработку платежей: если связь прерывается во время поездки, сумма будет списана позже при восстановлении соединения.

## Open questions
1. Как именно реализована система защиты от мошенничества при отмене поездок? Какие метрики используются для блокировки недобросовестных пользователей или водителей?
2. Как Yandex Go масштабирует **Matching Service** во время пиковых нагрузок (например, в часы rush hour)? Используется ли горизонтальное масштабирование с шардированием по географическим зонам?

